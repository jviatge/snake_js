<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Mini jeux</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css' media='screen' href='style.css'>
</head>
<body>
    <script type="text/javascript">
        function move_bottom(){
            let player_1 = document.getElementById("player_1");
            let position_style =  player_1.style.top;
            let position = parseFloat(position_style);
                if(Number.isInteger(position)){
                    let total_pos = position + 40;
                    if(total_pos > 360){
                        player_1.style.top = "-360px";
                    } else {
                        player_1.style.top = total_pos + "px";
                    }
                } else {
                    player_1.style.top = 40 + "px";
                }
            }

        function move_top(){
            let player_1 = document.getElementById("player_1");
            let position_style =  player_1.style.top;
            let position = parseFloat(position_style);
                if(Number.isInteger(position)){
                    let total_pos = position - 40;  
                    if(total_pos < -360){
                        player_1.style.top = "360px";
                    } else {
                        player_1.style.top = total_pos + "px";
                    }
                } else {
                    player_1.style.top = -40 + "px";
                }
            }

        function move_right(){
            let player_1 = document.getElementById("player_1");
            let position_style =  player_1.style.right;
            let position = parseFloat(position_style);
                if(Number.isInteger(position)){
                    let total_pos = position - 40;
                    if(total_pos < -360){
                        player_1.style.right = "0px";    
                    } else {
                        player_1.style.right = total_pos + "px";
                    }
                } else {
                    player_1.style.right = -40 + "px";
                }
            }

        function move_left(){
            let player_1 = document.getElementById("player_1");
            let position_style =  player_1.style.right;
            let position = parseFloat(position_style);
                if(Number.isInteger(position)){
                    let total_pos = position + 40;
                    if(total_pos > 360){
                        player_1.style.right = "0px";  
                    } else {
                        player_1.style.right = total_pos + "px";
                    }
                } else {
                    player_1.style.right = 40 + "px";
                }
            }

        function myStopFunction(){
            clearInterval(myVar);
            }

    </script>

    <script>
        function bloc_spawn(){
            let bloc = document.getElementById("bloc_1");

            //bloc.style.display = "block";
            //let display = bloc.style.display
            //console.log(display);
           
            if(bloc.style.display == ""){
                
                bloc.style.display = "inline-block";
            } 

            let y = 40 * (Math.floor(Math.random() * (8 - 1 + 1)) + 1);
                    //Math.floor(Math.random() * (max - min + 1)) + min;
            let x = 40 * (Math.floor(Math.random() * (8 - 1 + 1)) + 1);

            let symbole_top;
            let symbole_right;

            let choice = Math.floor(Math.random() * (2 - 1 + 1)) + 1;
            if(choice == 1){
                bloc.style.top = "-" + y + "px";
            }else{
                bloc.style.top = y + "px";
            }
          
            choice = Math.floor(Math.random() * (2 - 1 + 1)) + 1;
            if(choice == 1){
                bloc.style.right = "-" + x + "px";
            }else{
                bloc.style.right = x + "px";
            }
            
            //console.log(y);
            //bloc.style.right = symbole_right + x + "px";
            //console.log(x);
        }
        setInterval(bloc_spawn, 3200);   // <------------------------------
    </script>

    <div class="frame_game">
        <div class="bloc" id="bloc_1"></div>
        <div id="player_1"></div>
        <!-- <div class="bloc" id="bloc_2"></div>
        <div class="bloc" id="bloc_3"></div> -->
    </div>

    <script type="text/javascript">
        let myVar;

        document.addEventListener('keypress', function(event){
           
            
            //console.log(event.which, String.fromCharCode(event.which));

            let key = event.which;
            switch(key){
                
                case 115:
                    clearInterval(myVar);
                    myVar = setInterval(move_bottom, 300);
                break;

                case 122:
                    clearInterval(myVar);
                    myVar = setInterval(move_top, 300);
                break;


                case 100:
                    clearInterval(myVar);
                    myVar = setInterval(move_right, 300);
                break;


                case 113:
                    clearInterval(myVar);
                    myVar = setInterval(move_left, 300);
                break;
            
            }

        });
 

    </script>
</body>
</html>
